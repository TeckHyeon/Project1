<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>태그 검색결과 페이지</title>
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/main.css">
</head>
<body>
	<div class="col container" th:fragment="tagResult">
		<div class="justify-content-center container col-8">
			<input type="hidden" th:value="${loggedIn}" id="isLoggedIn">
			<div th:if="${loggedInUser != null}">
				<input type="hidden" th:value="${loggedInUser.user_idx}"
					id="user_idx"> <input type="hidden"
					th:value="${loggedInUser.user_id}" id="user_id">
				<script src="/js/likeBtn.js"></script>
			</div>
			<div
				class="container-fluid d-flex justify-content-center align-items-center">
				<div class="row">
					<div class="col">
						<div th:each="item, iterStat : ${trs}" class="border mt-5 feed"
							style="width: 470px; height: auto;">
							<div class="p-4">
								<!-- 첫 번째 내용 블록 -->
								<div class="d-flex justify-content-between mb-3">
									<div class="d-flex align-items-center">
										<a th:href="@{/profile/{id}(id=${item.post_id})}"> <img
											src="/user_profile/profile.jpg"
											th:src="${item.profile != null} ? ${item.profile.file_path} : '/user_profile/default.jpg'"
											class="rounded-circle profile-img"
											style="width: 50px; height: 50px; cursor: pointer;">
										</a>
										<p th:text="${item.post_name}"
											th:id="'post_name'+${item.post_idx}" class="mb-0 ml-2 ms-3"></p>
									</div>

									<p class="text-end" th:text="${item.timeago}">
								</div>
								<div class="">
									<div th:each="file : ${item.fileList}"
										class="d-flex justify-content-center">
										<img th:src="${file.file_Path}" alt="게시글 이미지"
											class="post-image mb-3 post-image"
											style="width: 280px; height: auto;">
									</div>
									<div th:id="'content' + ${iterStat.index}" class="mt-3 px-3">
										<p th:id="'content_text' + ${iterStat.index}"
											th:text="${item.post_contents}" class="content_text content"></p>
										<button
											class="toggleButton btn btn-link text-dark text-decoration-none"
											th:data-target="'content_text' + ${iterStat.index}"
											onclick="showMoreContent(this)">더보기</button>
									</div>
									<div class="d-flex">
										<div th:each="tag : ${item.tagList}">
											<button class="btn btn-outline-primary m-1 mt-3 tag-btn" th:data-tag-name="${tag.tag_name}"
												th:text="${tag.tag_name}"></button>
										</div>
									</div>
								</div>
								<div class="ms-3 my-1">
									<span class="fw-bold like_btn"
										th:attr="data-post-idx=${item.post_idx}, data-post-id=${item.post_id}, data-message-number=1">
										<svg class="w-6 h-6 text-gray-800 text-danger"
											aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
											width="24" height="24" fill="none" viewBox="0 0 24 24">
                      							<path stroke="currentColor"
												stroke-linecap="round" stroke-linejoin="round"
												stroke-width="2"
												d="M12.01 6.001C6.5 1 1 8 5.782 13.001L12.011 20l6.23-7C23 8 17.5 1 12.01 6.002Z" />
                    						</svg>
									</span> <input type="text" th:value="${item.post_likes}"
										th:id="'post_likes' + ${item.post_idx}">
								</div>
								<div th:id="'commentSection-'+${item.post_idx}">
									<div class="mt-3" th:each="comment : ${item.commentList}">
										<div class="border px-3 py-2">
											<div class="d-flex justify-content-between">
												<p th:text="${comment.from_name}">
												<p th:text="${comment.commentTimeAgo}">
											</div>
											<p th:text="${comment.comment_content}">
										</div>
									</div>

								</div>
								<div class="mt-3 row">
									<textarea class="form-control comment-box col border no-resize"
										th:attr="data-post-idx=${item.post_idx}, data-post-id=${item.post_id}, data-message-number=3"
										placeholder="댓글 달기..." style="border: none; height: 3rem"></textarea>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="/js/youtubeLink.js"></script>
	<script src="/js/comment.js"></script>
	<script src="/js/bootstrap.bundle.min.js"></script>
	<script src="/js/tagResult.js"></script>
	</div>
</body>
</html>