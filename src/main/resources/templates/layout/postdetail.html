<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>

<body>
	<div th:fragment="postdetail">
		<div class="modal fade" th:id="'postDetail' + ${noti_idx}"
			data-bs-backdrop="true" th:data-noti-idx="${noti_idx}"
			data-bs-keyboard="false" tabindex="-1"
			th:attr="aria-labelledby='postModalTitle' + ${noti_idx}"
			aria-hidden="true">
			<div th:if="${user != null}">
				<input type="hidden" th:value="${user.user_idx}" id="user_idx">
				<input type="hidden" th:value="${user.user_id}" id="user_id">
			</div>
			<div class="modal-dialog modal-xl modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-body">
						<h2 class="modal-title" th:id="'postModalTitle' + ${noti_idx}"
							th:text="${post.post_title}"></h2>
						<hr>
						<div th:if="${post != null}">
							<div class="d-flex justify-content-between mb-3">
								<input type="text" th:value="${post.post_id}" disabled>
								<input class="text-end" type="text"
									th:value="${post.post_updated_date}" readonly disabled>
							</div>
							<div class="">
								<div th:each="file : ${post.fileList}"
									class="d-flex justify-content-center">
									<img th:src="${file.file_Path}" alt="게시글 이미지"
										class="post-image mb-3" style="width: 280px; height: auto;">
								</div>
								<div th:id="'content' + ${noti_idx}" class="mt-3 px-3">
									<p th:id="'dcontent_text' + ${noti_idx}"
										data-postdetail-id=${post.post_id}
										th:text="${post.post_contents}" class="content_text content"></p>
									<button
										class="toggleButton btn btn-link text-dark text-decoration-none"
										th:data-target="'content_text' + ${post.post_id}"
										onclick="showMoreContent(this)">더보기</button>

								</div>

							</div>
							<div class="ms-3 my-1">
								<span class="fw-bold dlike_btn"
									th:attr="data-postdetail-idx=${post.post_idx}, data-postdetail-id=${post.post_id}, data-message-number=1, data-noti-idx=${noti_idx}">
									<svg class="w-6 h-6 text-gray-800 text-danger"
										aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
										width="24" height="24" fill="none" viewBox="0 0 24 24">
										<path stroke="currentColor" stroke-linecap="round"
											stroke-linejoin="round" stroke-width="2"
											d="M12.01 6.001C6.5 1 1 8 5.782 13.001L12.011 20l6.23-7C23 8 17.5 1 12.01 6.002Z" />
									</svg>
								</span> <input type="text" th:value="${post.post_likes}"
									th:id="'postdetail_likes' + ${noti_idx}">
							</div>
							<div th:id="'commentDetail-'+${noti_idx}">
							<div class="mt-3" th:each="comment : ${comments}">
								<div class="border px-3 py-2">
									<div class="d-flex justify-content-between">
										<p th:text="${comment.from_name}">
										<p th:text="${comment.commentTimeAgo}">
									</div>
									<p th:text="${comment.comment_content}">
								</div>
							</div>							
							</div>
							<div class="mt-3 row">
								<textarea class="form-control comment-box col"
									th:attr="data-post-idx=${post.post_idx}, data-post-id=${post.post_id}, data-message-number=3, data-noti-idx=${noti_idx}"
									placeholder="댓글 달기..." style="border: none; height: 3rem"></textarea>
							</div>
						</div>
						<div th:unless="${post != null}">
							<input type="text" value="글 못 읽음">
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="/js/postdetail.js"></script>
		<script src="/js/postdetailYoutube.js"></script>
		<script src="/js/postDetailComment.js"></script>
	</div>
</body>
</html>